<!DOCTYPE html>
<html><head>
  <title>stash wishlist config</title>
  <style>
    html, input {
      background: #000;
      color: #ddd;
      border-color: #ddd;
      font-size: 1em;
    }
    .hero {
      display: flex;
      flex-direction: column;
    }
  </style>
</head>
<body>
  <pre id="config" class="hero" style="width: 50vw;">
    <label for="stashlist_host">stashlist host</label>
    <input type="text" id="stashlist_host" value="https://stashlist.feederbox.cc/api">
    <label for="stashlist_apikey">stashlist auth key</label>
    <input type="text" id="stashlist_apikey" value="">
    <label for="stashdb_host">stashdb GQL endpoint</label>
    <input type="text" id="stashdb_host" value="https://stashdb.org">
    <label for="stashdb_apikey">stashdb GQL key</label>
    <input type="text" id="stashdb_apikey" value="">
    <label for="jackett_host">jackett URL</label>
    <input type="text" id="jackett_host" value="https://jackett.example.com/UI/Dashboard">
    <label for="localstash_host">local stash GQL endpoint</label>
    <input type="text" id="localstash_host" value="http://localhost:9999">
    <label for="localstash_apikey">local stash auth key</label>
    <input type="text" id="localstash_apikey" value="">
    <label for="fetch-adapter">fetch adapter</label>
    <input type="text" id="fetch-adapter" value="" placeholder="unknown" readonly disabled>
    <input type="button" id="save" value="Save" onclick="save_localstorage()">
  </pre>
  <script>
    const valueArr = ["stashlist_host", "stashlist_apikey", "stashdb_host", "stashdb_apikey", "jackett_host", "localstash_host", "localstash_apikey"]
    const load_input = (name) => document.getElementById(name).value = localStorage.getItem(name);
    const save_input = (name) => localStorage.setItem(name, document.getElementById(name).value);
    const save_localstorage = () => {
        valueArr.forEach(name => save_input(name))
        alert("Saved!");
    }
    valueArr.forEach(name => load_input(name))

    // populate fetch adapter
    const fetchAdapter = document.getElementById("fetch-adapter");
    fetchAdapter.value = window?.GM_fetch ? "GM_fetch âœ…" : "fetch"
  </script>
</body></html>